=================================UC-3.1: Book New Appointment===============================
 INSERT INTO appointments
    -> (patient_id, doctor_id, appointment_date, appointment_time, status)
    -> VALUES (1, 1, CURDATE(), '10:30:00', 'SCHEDULED');
Query OK, 1 row affected (0.01 sec)

mysql> select * from appointments;
+----------------+------------+-----------+------------------+------------------+-----------+
| appointment_id | patient_id | doctor_id | appointment_date | appointment_time | status    |
+----------------+------------+-----------+------------------+------------------+-----------+
|              1 |          1 |         1 | 2026-02-09       | 10:00:00         | SCHEDULED |
|              2 |          2 |         2 | 2026-02-09       | 11:00:00         | SCHEDULED |
|              3 |          1 |         3 | 2026-02-09       | 12:00:00         | SCHEDULED |
|              4 |          1 |         1 | 2026-02-09       | 10:30:00         | SCHEDULED |
+----------------+------------+-----------+------------------+------------------+-----------+
4 rows in set (0.00 sec)


//======================================UC-3.2: Check Doctor Availability==================================
 select appointment_time,Count(*) As booked_slots
    -> from appointments
    -> where doctor_id =1
    -> AND appointment_date = CURDATE()
    -> GROUP BY appointment_time;
+------------------+--------------+
| appointment_time | booked_slots |
+------------------+--------------+
| 10:00:00         |            1 |
| 10:30:00         |            1 |
+------------------+--------------+


//==========================================UC-3.3: Cancel Appointment==========================================
START TRANSACTION;

UPDATE appointments
SET status = 'CANCELLED'
WHERE appointment_id = 1;

INSERT INTO appointment_audit (appointment_id, action)
VALUES (1, 'CANCELLED');

COMMIT;
 select * from appointment_audit;
+----------+----------------+-----------+---------------------+
| audit_id | appointment_id | action    | action_time         |
+----------+----------------+-----------+---------------------+
|        1 |              1 | CREATED   | 2026-02-09 13:18:41 |
|        2 |              1 | CANCELLED | 2026-02-09 13:18:41 |
|        3 |              1 | CANCELLED | 2026-02-09 13:20:12 |
+----------+----------------+-----------+---------------------+

//==================================UC-3.4: Reschedule Appointment==========================================

 UPDATE appointments
    -> SET appointment_date = '2026-02-10',
    -> appointment_time = '11:00:00'
    -> WHERE appointment_id = 1;

 COMMIT;

 select * from appointments;
+----------------+------------+-----------+------------------+------------------+-----------+
| appointment_id | patient_id | doctor_id | appointment_date | appointment_time | status    |
+----------------+------------+-----------+------------------+------------------+-----------+
|              1 |          1 |         1 | 2026-02-10       | 11:00:00         | CANCELLED |
|              2 |          2 |         2 | 2026-02-09       | 11:00:00         | SCHEDULED |
|              3 |          1 |         3 | 2026-02-09       | 12:00:00         | SCHEDULED |
|              4 |          1 |         1 | 2026-02-09       | 10:30:00         | SCHEDULED |
+----------------+------------+-----------+------------------+------------------+-----------+


//==================================UC-3.5: View Daily Appointment Schedule======================

 SELECT
    ->     a.appointment_time,
    ->     p.name AS patient_name,
    ->     d.name AS doctor_name,
    ->     a.status
    -> FROM appointments a
    -> JOIN patients p ON a.patient_id = p.patient_id
    -> JOIN doctors d ON a.doctor_id = d.doctor_id
    -> WHERE a.appointment_date = CURDATE()
    -> ORDER BY a.appointment_time;
+------------------+--------------+-------------+-----------+
| appointment_time | patient_name | doctor_name | status    |
+------------------+--------------+-------------+-----------+
| 10:30:00         | Shifa        | Dr. Mehta   | SCHEDULED |
| 11:00:00         | Aliya        | Dr. Singh   | SCHEDULED |
| 12:00:00         | Shifa        | Dr. Patel   | SCHEDULED |
+------------------+--------------+-------------+-----------+
3 rows in set (0.01 sec)






















